FROM php:8.0-apache

COPY ./overflow.c /home/steve/overflow.c
COPY ./index.html /var/www/html/index.html
RUN apt update
RUN echo 'Y' | apt install build-essential
RUN echo 'Y' | apt install gcc-multilib
RUN apt update && apt install openssh-server sudo -y
RUN useradd -rm -d /home/steve -s /bin/bash -u 1001 steve
RUN gcc /home/steve/overflow.c -o /home/steve/application -fno-stack-protector -m32
RUN echo 'steve:password123' | chpasswd
RUN service ssh start
EXPOSE 22
CMD ["/usr/sbin/sshd", "-D"]
